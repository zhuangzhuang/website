<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
        <meta name="description" />
        <meta name="keywords" content="static content generator,static site generator,static site,HTML,web development,.NET,C#,Razor,Markdown,YAML" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/assets/img/favicon.ico" type="image/x-icon">
        <title>Cake - Cake.Issues - A suite of addins for issue handling in Cake</title>
        <link href="/assets/css/mermaid.css" rel="stylesheet">
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/bootstrap/bootstrap.css" rel="stylesheet" />
        <link href="/assets/css/adminlte/AdminLTE.css" rel="stylesheet" />
        <link href="/assets/css/theme/theme.css" rel="stylesheet" />
        <link href="//fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,400i,700,700i" rel="stylesheet">
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href="/assets/css/override.css" rel="stylesheet" />
        <script src="/assets/js/jquery-2.2.3.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>        
        <script src="/assets/js/app.min.js"></script>         
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/jquery.slimscroll.min.js"></script>
        <script src="/assets/js/jquery.sticky-kit.min.js"></script>
        <script src="/assets/js/mermaid.min.js"></script>
        <!--[if lt IE 9]>
        <script src="/assets/js/html5shiv.min.js"></script>
        <script src="/assets/js/respond.min.js"></script>
        <![endif]-->  

        <script type="text/javascript" src="/assets/js/anchor.min.js"></script>
    </head>
    <body class="hold-transition wyam layout-boxed  ">    
        <div class="top-banner"></div>
        <div class="wrapper with-container">
            <!-- Header -->
            <header class="main-header">   
                     
                <a href="/" class="logo">

                                <!-- mini logo for sidebar mini 50x50 pixels -->
                                <span class="logo-mini"><img src="/assets/img/logo.png"></span>
                                <!-- logo for regular state and mobile devices -->
                                <span class="logo-lg"><img src="/assets/img/logo.png"></span>
                                            </a>   
                         
                <nav class="navbar navbar-static-top" role="navigation">
                    <!-- Sidebar toggle button-->
                        <a href="#" class="sidebar-toggle visible-xs-block" data-toggle="offcanvas" role="button">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-right"></i>
                        </a>
                                        
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                            <span class="sr-only">Toggle side menu</span>
                            <i class="fa fa-chevron-circle-down"></i>
                        </button>
                    </div>
            
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
                        <ul class="nav navbar-nav">                            
                                    <li class="active"><a href="/blog">Blog</a></li>
        <li><a href="/docs">Documentation</a></li>
        <li><a href="/dsl">Reference</a></li>
        <li><a href="/addins">Addins</a></li>
        <li><a href="/api">API</a></li>
        <li><a href="/faq">FAQ</a></li>
        <li><a href="https://github.com/cake-build/cake"><i class="fa fa-github"></i> Source</a></li>
 
                        </ul>       
                    </div>
                    <!-- /.navbar-collapse -->
                
                    <!-- Navbar Right Menu -->
                </nav>
            </header>
            
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="main-sidebar ">
                <section class="infobar" data-spy="affix" data-offset-top="60" data-offset-bottom="200"> 
                    	
        <div><p><a href="https://github.com/cake-build/website/blob/develop/input/blog/2018-06-10-cake-issues.md"><i class="fa fa-pencil-square" aria-hidden="true"></i> Edit Content</a></p></div>
    <div id="infobar-headings"></div>

                </section>
                <section class="sidebar">    
                                     
                    

                    <ul class="sidebar-menu">
                        

    <li class="header"><i class="fa fa-bookmark"></i> Categories</li>    
        <li><a href="/blog/Addins">Addins</a></li>
        <li><a href="/blog/Announcement">Announcement</a></li>
        <li><a href="/blog/How-Tos">How To&#x27;s</a></li>
        <li><a href="/blog/Infrastructure">Infrastructure</a></li>
        <li><a href="/blog/News">News</a></li>
        <li><a href="/blog/Release-Notes">Release Notes</a></li>
    
    <li class="header"><i class="fa fa-calendar"></i> Archive</li>    
        <li><a href="/blog/archive/2018/12">December, 2018</a></li>
        <li><a href="/blog/archive/2018/08">August, 2018</a></li>
        <li><a href="/blog/archive/2018/07">July, 2018</a></li>
        <li><a href="/blog/archive/2018/06">June, 2018</a></li>
        <li><a href="/blog/archive/2018/05">May, 2018</a></li>
        <li><a href="/blog/archive/2018/04">April, 2018</a></li>
        <li><a href="/blog/archive/2018/03">March, 2018</a></li>
        <li><a href="/blog/archive/2018/02">February, 2018</a></li>
        <li><a href="/blog/archive/2018/01">January, 2018</a></li>
        <li><a href="/blog/archive/2017/12">December, 2017</a></li>
        <li><a href="/blog/archive/2017/11">November, 2017</a></li>
        <li><a href="/blog/archive/2017/10">October, 2017</a></li>
        <li><a href="/blog/archive/2017/09">September, 2017</a></li>
        <li><a href="/blog/archive/2017/08">August, 2017</a></li>
        <li><a href="/blog/archive/2017/07">July, 2017</a></li>
        <li><a href="/blog/archive/2017/06">June, 2017</a></li>
        <li><a href="/blog/archive/2017/05">May, 2017</a></li>
        <li><a href="/blog/archive/2017/04">April, 2017</a></li>
        <li><a href="/blog/archive/2017/03">March, 2017</a></li>
        <li><a href="/blog/archive/2017/01">January, 2017</a></li>
        <li><a href="/blog/archive/2016/12">December, 2016</a></li>
        <li><a href="/blog/archive/2016/11">November, 2016</a></li>
        <li><a href="/blog/archive/2016/10">October, 2016</a></li>
        <li><a href="/blog/archive/2016/09">September, 2016</a></li>
        <li><a href="/blog/archive/2016/08">August, 2016</a></li>
        <li><a href="/blog/archive/2016/07">July, 2016</a></li>
        <li><a href="/blog/archive/2016/06">June, 2016</a></li>
        <li><a href="/blog/archive/2016/05">May, 2016</a></li>
        <li><a href="/blog/archive/2016/04">April, 2016</a></li>
        <li><a href="/blog/archive/2016/03">March, 2016</a></li>
        <li><a href="/blog/archive/2016/02">February, 2016</a></li>
        <li><a href="/blog/archive/2016/01">January, 2016</a></li>
        <li><a href="/blog/archive/2015/12">December, 2015</a></li>
        <li><a href="/blog/archive/2015/11">November, 2015</a></li>
        <li><a href="/blog/archive/2015/10">October, 2015</a></li>
        <li><a href="/blog/archive/2015/09">September, 2015</a></li>
        <li><a href="/blog/archive/2015/08">August, 2015</a></li>
        <li><a href="/blog/archive/2015/07">July, 2015</a></li>
    
    <li class="header"><i class="fa fa-user"></i> Authors</li>    
        <li><a href="/blog/author/agc93">agc93</a></li>
        <li><a href="/blog/author/daveaglick">daveaglick</a></li>
        <li><a href="/blog/author/devlead">devlead</a></li>
        <li><a href="/blog/author/gep13">gep13</a></li>
        <li><a href="/blog/author/jericho">jericho</a></li>
        <li><a href="/blog/author/Larz-White">Larz White</a></li>
        <li><a href="/blog/author/mholo65">mholo65</a></li>
        <li><a href="/blog/author/Pascal-Berger">Pascal Berger</a></li>
        <li><a href="/blog/author/patriksvensson">patriksvensson</a></li>
        <li><a href="/blog/author/phillipsj">phillipsj</a></li>
        <li><a href="/blog/author/RLittlesII">RLittlesII</a></li>

                    </ul>
                            
                </section>                
            </aside>
            
            <!-- Content Wrapper. Contains page content -->
            <div class="content-wrapper">
                



		<section class="content-header">
			<h1>Cake.Issues - A suite of addins for issue handling in Cake</h1>
		</section>
	<section class="content">
		


<dl class="dl-horizontal">
    <dt><i class="fa fa-calendar"></i> Published</dt>
    <dd>Sunday, June 10, 2018</dd>
        <dt><i class="fa fa-bookmark"></i> Category</dt>
        <dd><a href="/blog/Addins">Addins</a></dd>
            <dt><i class="fa fa-user"></i> Author</dt>
        <dd><a href="/blog/author/Pascal-Berger">Pascal Berger</a></dd>
</dl>


<html><head></head><body><p>Do you want to break your build on JetBrains InspectCode issues?
Do you want to create nice reports for StyleCop issues in your code?
Do you want to have ESLint issues reported as comments to pull requests?
The <a href="https://cake-contrib.github.io/Cake.Issues.Website/">Cake.Issues addins</a> allows you to do this and much more.
Read issues from different analyzer or linters, create reports or add them as comments to pull requests.</p>
<!--excerpt-->
<h3 id="the-cake.issues-addins">The Cake.Issues addins</h3>
<p>While some linting tools provide nice reporting capabilities, others don't.
Some build systems provide tasks to report issues into pull requests.
But if you're using another build system your out of luck.
Maybe you found a new nice linting tool which does exactly what you need, but probably it won't integrate well
with your existing other linting tools.</p>
<p>The <a href="https://cake-contrib.github.io/Cake.Issues.Website/">Cake.Issues addins</a> tries to solve this,
by providing a common and extensible infrastructure for issue management in Cake build scripts.</p>
<p>Unlike other Cake addins, the Cake Issues addin consists of over 10 different addins, working together
and providing over 50 aliases which can be used in Cake build scripts to work with issues.
The addins are built in a modular architecture and are providing different extension points which allows
to easily enhance them for supporting additional analyzers, linters, report formats and code review systems.</p>
<h3 id="preparation-work">Preparation work</h3>
<p>In the following examples we assume a Visual Studio solution, containing some Roslyn Analyzers, which we want
to build and additionally run JetBrains InspectCode on it.</p>
<p>For creating an XML log from MsBuild we need the <code>XmlFileLogger</code> class from the <a href="http://www.msbuildextensionpack.com/">MSBuild Extension Pack</a>
and the JetBrains InspectCode tool:</p>
<pre><code class="language-csharp">#tool "nuget:?package=MSBuild.Extension.Pack"
#tool "nuget:?package=JetBrains.ReSharper.CommandLineTools"
</code></pre>
<p>Now we can use the aliases provided by Cake out of the box to build the solution and run JetBrains InspectCode resulting in two log files containing the issues:</p>
<pre><code class="language-csharp">var repoRootFolder = MakeAbsolute(Directory("./"));
var msBuildLog = repoRootFolder.CombineWithFilePath("msbuild.log");
var inspectCodeLog = repoRootFolder.CombineWithFilePath("inspectCode.log");

Task("Build")
    .Does(() =&gt;
{
    var settings = new MSBuildSettings()
    .WithTarget("Rebuild")
    .WithLogger(
        Context.Tools.Resolve("MSBuild.ExtensionPack.Loggers.dll").FullPath,
        "XmlFileLogger",
        string.Format(
            "logfile=\"{0}\";verbosity=Detailed;encoding=UTF-8",
            msBuildLog)
    );

    MSBuild(repoRootFolder.Combine("src").CombineWithFilePath("MySolution.sln"), settings);
});

Task("Run-InspectCode")
    .Does(() =&gt;
{
    var settings = new InspectCodeSettings() {
        OutputFile = inspectCodeLog
    };

    InspectCode(repoRootFolder.Combine("src").CombineWithFilePath("MySolution.sln"), settings);
});
</code></pre>
<h3 id="reading-issues">Reading issues</h3>
<p>The <code>Cake.Issues</code> addin now allows you to parse the generated log files and retrieve the issues in a common structure.
The addin provides aliases for reading issues and can be used to aggregate issues from different sources.
This can for example be useful to break builds based on the reported issues.</p>
<p>To read the issues we need to import the following core addin:</p>
<pre><code class="language-csharp">#addin "Cake.Issues"
</code></pre>
<p>We also need to import at least one issue provider.
Issue provider are separate addins which can provide issues from a specific linter or tool.
The <a href="https://cake-contrib.github.io/Cake.Issues.Website/docs/issue-providers/">issue provider</a> documentation gives an
overview of available issue providers including samples how to integrate them in a Cake build script.</p>
<p>In the following example the issue providers for reading warnings from MsBuild log files
and from JetBrains InspectCode are imported:</p>
<pre><code class="language-csharp">#addin "Cake.Issues.MsBuild"
#addin "Cake.Issues.InspectCode"
</code></pre>
<p>Finally we  define a task where we call the core addin with the desired issue providers.
The following example reads the reported issues with comments formatted as Markdown:</p>
<pre><code class="language-csharp">IEnumerable&lt;<a href="/api/Cake.Issues/IIssue">IIssue</a>&gt; issues = null;

Task("Read-Issues")
    .IsDependentOn("Build")
    .IsDependentOn("Run-InspectCode")
    .Does(() =&gt;
{
    var settings =
        new ReadIssuesSettings(repoRootFolder)
        {
            Format = IssueCommentFormat.Markdown
        };

    issues = ReadIssues(
        new List&lt;<a href="/api/Cake.Issues/IIssueProvider">IIssueProvider</a>&gt;
        {
            MsBuildIssuesFromFilePath(
                msBuildLog,
                MsBuildXmlFileLoggerFormat),
            InspectCodeIssuesFromFilePath(
                inspectCodeLog)
        },
        settings);

    Information("{0} issues are found.", issues.Count());
});
</code></pre>
<h3 id="creating-reports">Creating reports</h3>
<p>With the issues from the different tools in a common format it is now possible to create reports out of it.
The <code>Cake.Issues.Reporting</code> addin provides the required aliases for this.
The concrete reporting format is defined in separate <a href="https://cake-contrib.github.io/Cake.Issues.Website/docs/report-formats/">report format addins</a>.</p>
<p>Currently there's one report format available which allows you to render reports using <a href="https://github.com/Antaris/RazorEngine">RazorEngine</a>.</p>
<p>The following example will create a HTML report of the issues:</p>
<pre><code class="language-csharp">#addin "Cake.Reporting"
#addin "Cake.Reporting.Generic"

Task("Create-Report")
    .IsDependentOn("Read-Issues")
    .Does(() =&gt;
{
    // Create HTML report using Data Table template.
    CreateIssueReport(
        issues,
        GenericIssueReportFormatFromEmbeddedTemplate(GenericIssueReportTemplate.HtmlDataTable),
        repoRootFolder,
        repoRootFolder.CombineWithFilePath("report.html"));
});
</code></pre>
<p>The result will look like this:</p>
<p><img src="/assets/img/cake-issues/htmldatatable.png" class="img-fluid" alt="Report"></p>
<p>The addin provides some <a href="https://cake-contrib.github.io/Cake.Issues.Website/docs/report-formats/generic/templates/">out of the box templates</a>,
but you can also pass your own <a href="https://cake-contrib.github.io/Cake.Issues.Website/docs/report-formats/generic/examples#use-custom-template">custom template</a>
in which you can do whatever RazorEngine is capable of doing.</p>
<h3 id="reporting-issues-to-pull-requests">Reporting issues to pull requests</h3>
<p>The last core part of the Cake Issues suite is for reporting issues as comments to pull requests.
The <code>Cake.Issues.PullRequests</code> addin provides the required aliases and the implementation for the concrete pull request system
is again implemented in separate <a href="https://cake-contrib.github.io/Cake.Issues.Website/docs/pull-request-systems/">pull request system addins</a>.</p>
<p>The following example will report issues as comments to Team Foundation Server:</p>
<pre><code class="language-csharp">#addin "Cake.Issues.PullRequests"
#addin "Cake.Issues.PullRequests.Tfs"

Task("ReportIssuesToPullRequest").Does(() =&gt;
{
    ReportIssuesToPullRequest(
        new List&lt;<a href="/api/Cake.Issues/IIssueProvider">IIssueProvider</a>&gt;
        {
            MsBuildIssuesFromFilePath(
                msBuildLog,
                MsBuildXmlFileLoggerFormat),
            InspectCodeIssuesFromFilePath(
                inspectCodeLog)
        },
        TfsPullRequests(
            new Uri("http://myserver:8080/tfs/defaultcollection/myproject/_git/myrepository"),
            "refs/heads/feature/myfeature",
            TfsAuthenticationNtlm()),
        repoRootFolder);
});
</code></pre>
<p>The result will look like this in Team Foundation Server:</p>
<p><img src="/assets/img/cake-issues/pullrequests.png" class="img-fluid" alt="Pull request integration"></p>
<h3 id="conclusion">Conclusion</h3>
<p>The <a href="https://cake-contrib.github.io/Cake.Issues.Website/">Cake.Issues addins</a> provide a common way to integrate different linters and tools into a Cake build script.
It's fully <a href="https://cake-contrib.github.io/Cake.Issues.Website/docs/extending/">extensible</a> for additional issue providers, report formats or pull request systems.</p>
<p>Documentation is available on its own <a href="https://cake-contrib.github.io/Cake.Issues.Website/">website</a>.</p>
<p>While the addins already cover a wide range of scenarios we're always looking for people interested in implementing additional issue providers,
report formats &amp; templates or pull request systems.</p>
<hr>
<p>My name is Pascal Berger.
I'm working as a Software Architect at <a href="http://www.bbtsoftware.ch">BBT Software AG</a>.
You can find me on <a href="https://twitter.com/hereispascal">Twitter</a> or <a href="https://github.com/pascalberger">GitHub</a>.</p>
</body></html>

<hr />

<ul class="share-buttons">
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues&t=Cake.Issues%20-%20A%20suite%20of%20addins%20for%20issue%20handling%20in%20Cake" title="Share on Facebook" target="_blank"><img alt="Share on Facebook" src="/assets/img/social_flat_rounded_rects_svg/Facebook.svg"></a></li>
  <li><a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues&text=Cake.Issues%20-%20A%20suite%20of%20addins%20for%20issue%20handling%20in%20Cake:%20http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues&via=cakebuildnet" target="_blank" title="Tweet"><img alt="Tweet" src="/assets/img/social_flat_rounded_rects_svg/Twitter.svg"></a></li>
  <li><a href="http://www.reddit.com/submit?url=http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues&title=Cake.Issues%20-%20A%20suite%20of%20addins%20for%20issue%20handling%20in%20Cake" target="_blank" title="Submit to Reddit"><img alt="Submit to Reddit" src="/assets/img/social_flat_rounded_rects_svg/Reddit.svg"></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues&title=Cake.Issues%20-%20A%20suite%20of%20addins%20for%20issue%20handling%20in%20Cake&summary=&source=http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues" target="_blank" title="Share on LinkedIn"><img alt="Share on LinkedIn" src="/assets/img/social_flat_rounded_rects_svg/LinkedIn.svg"></a></li>
  <li><a href="mailto:?subject=Cake.Issues%20-%20A%20suite%20of%20addins%20for%20issue%20handling%20in%20Cake&body=:%20http%3A%2F%2Fcakebuild.net%2Fblog%2F2018%2F06%2Fcake-issues" target="_blank" title="Send email"><img alt="Send email" src="/assets/img/social_flat_rounded_rects_svg/Email.svg"></a></li>
</ul>

	</section>
                
            </div>           
            
            <!-- Footer -->
            <footer class="main-footer">
            </footer>
            
        </div>
        <div class="wrapper bottom-wrapper">
            <footer class="bottom-footer">
                <p class="text-muted">
    <a href="https://github.com/cake-build/cake"><i class="fa fa-github"></i> GitHub</a> |
    <a href="https://twitter.com/cakebuildnet"><i class="fa fa-twitter"></i> Twitter</a> |
    <a href="https://gitter.im/cake-build/cake"><i class="fa fa-comment"></i> Gitter</a>
    <br/>
    Copyright &copy; <a href="http://dotnetfoundation.org">.NET Foundation</a> and contributors.
    <br/>
    Generated by <a href="http://wyam.io">Wyam</a>
</p>

<script>
    anchors.add();
</script>
            </footer>
        </div>
        <a href="javascript:" id="return-to-top"><i class="fa fa-chevron-up"></i></a>
        <!-- Gitter -->
<script>
    ((window.gitter = {}).chat = {}).options = {
        room: 'cake-build/cake'
    };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>

<!-- Google Analytics -->
<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
            m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-60516413-1', 'auto');
    ga('send', 'pageview');
</script>
        <script>           
            // Close the sidebar if we select an anchor link
            $(".main-sidebar a[href^='#']:not('.expand')").click(function(){
                $(document.body).removeClass('sidebar-open');
            });
            
            $(document).load(function() {
                mermaid.initialize(
                {
                    flowchart:
                    {
                        htmlLabels: false,
                        useMaxWidth:false
                    }
                });  
                mermaid.init(undefined, ".mermaid")
                $('svg').addClass('img-responsive');
                
                $('pre code').each(function(i, block) {
                    hljs.highlightBlock(block);
                });  
            });
            hljs.initHighlightingOnLoad();

            // Back to top
            $(window).scroll(function() {
                if ($(this).scrollTop() >= 200) {        // If page is scrolled more than 50px
                    $('#return-to-top').fadeIn(1000);    // Fade in the arrow
                } else {
                    $('#return-to-top').fadeOut(1000);   // Else fade out the arrow
                }
            });
            $('#return-to-top').click(function() {      // When arrow is clicked
                $('body,html').animate({
                    scrollTop : 0                       // Scroll to top of body
                }, 500);
            });
        </script>
    </body>
</html>